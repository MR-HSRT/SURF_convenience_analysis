"0","#| label: surf-plot-style"
"0","#| include: false"
"0",""
"0","# Pakete (minimal f√ºr Branding)"
"0","if (!requireNamespace(""png"", quietly = TRUE)) install.packages(""png"")"
"0","if (!requireNamespace(""cowplot"", quietly = TRUE)) install.packages(""cowplot"")"
"0",""
"0","library(grid)"
"0","library(png)"
"0","library(cowplot)"
"0",""
"0","# Pfad zum SURF-Logo"
"0","SURF_LOGO_PATH <- here::here(""doc"", ""survey"", ""Logo-Surf-RGB.png"")"
"0",""
"0","# Corporate-Farben (aus dem bereitgestellten SURF-Logo abgeleitet)"
"0","SURF_PURPLE <- ""#602890"""
"0","SURF_PINK   <- ""#E81878"""
"0","SURF_MAG    <- ""#902088"""
"0","SURF_TEXT   <- ""#2B2B2B"""
"0","SURF_GRID   <- ""#D9D9D9"""
"0",""
"0","theme_surf <- function(base_size = 12, base_family = """") {"
"0","  ggplot2::theme_minimal(base_size = base_size, base_family = base_family) +"
"0","    ggplot2::theme("
"0","      plot.title.position = ""plot"","
"0","      plot.title   = ggplot2::element_text(face = ""bold"", colour = SURF_TEXT, size = base_size * 1.15),"
"0","      plot.subtitle= ggplot2::element_text(colour = SURF_TEXT, size = base_size * 0.95),"
"0","      axis.title   = ggplot2::element_text(colour = SURF_TEXT),"
"0","      axis.text    = ggplot2::element_text(colour = SURF_TEXT),"
"0","      panel.grid.minor = ggplot2::element_blank(),"
"0","      panel.grid.major = ggplot2::element_line(colour = SURF_GRID, linewidth = 0.3),"
"0","      plot.margin = ggplot2::margin(12, 12, 12, 12)"
"0","    )"
"0","}"
"0",""
"0","# Logo als Grob laden"
"0","surf_logo_grob <- function(path = SURF_LOGO_PATH) {"
"0","  if (!file.exists(path)) return(NULL)"
"0","  img <- png::readPNG(path)"
"0","  grid::rasterGrob(img, interpolate = TRUE)"
"0","}"
"0",""
"0","# Plot + Logo (oben rechts, relative Koordinaten, robust)"
"0","brand_plot_surf <- function(p, logo_path = SURF_LOGO_PATH,"
"0","                            x = 0.98, y = 0.98, w = 0.16, h = 0.16) {"
"0","  lg <- surf_logo_grob(logo_path)"
"0","  if (is.null(lg)) return(p)"
"0",""
"0","  cowplot::ggdraw(p) +"
"0","    cowplot::draw_grob(lg, x = x - w, y = y - h, width = w, height = h, hjust = 0, vjust = 0)"
"0","}"
"0",""
