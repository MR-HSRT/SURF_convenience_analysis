"0","#| label: qc-time-histogram-all"
"0",""
"0","# Bearbeitungszeit in Minuten"
"0","surf_check <- surf_check |>"
"0","  dplyr::mutate(interview_min = as.numeric(interviewtime) / 60)"
"0",""
"0","# Quantile und Median"
"0","q_all <- quantile(surf_check$interview_min, probs = c(.05, .25, .50, .75, .95), na.rm = TRUE)"
"0","median_min <- q_all[3]"
"0","cutoff_speeder <- median_min / 3"
"0",""
"0","# Histogramm-Counts einmal vorab bestimmen, um die Fußnote sauber unter die Achse zu setzen"
"0","h <- hist(surf_check$interview_min, breaks = 35, plot = FALSE)"
"0","y_max <- max(h$counts, na.rm = TRUE)"
"0",""
"0","# Fußnoten-Positionen (unterhalb von 0, aber im sichtbaren Bereich durch ylim-Erweiterung)"
"0","y_note_bold <- -0.10 * y_max"
"0","y_note_text <- -0.16 * y_max"
"0",""
"0","# Fußnotentext umbrechen, damit er nicht rechts herausläuft"
"0","note_line <- stringr::str_wrap("
"0","  ""Quantile (Q05, Q25, Q50, Q75, Q95 – punktiert), Median (gestrichelt), Speeder-Cutoff = 1/3 Median (gestrichelt)."","
"0","  width = 95"
"0",")"
"0",""
"0","p_all <- ggplot2::ggplot(surf_check, ggplot2::aes(x = interview_min)) +"
"0","  ggplot2::geom_histogram(bins = 35) +"
"0","  ggplot2::geom_vline(xintercept = as.numeric(q_all), linetype = ""dotted"") +"
"0","  ggplot2::geom_vline(xintercept = median_min, linetype = ""dashed"") +"
"0","  ggplot2::geom_vline(xintercept = cutoff_speeder, linetype = ""dashed"") +"
"0","  ggplot2::labs("
"0","    title = ""Verteilung der Bearbeitungszeit – alle Interviews"","
"0","    x = ""Bearbeitungszeit (Minuten)"","
"0","    y = ""Anzahl Befragte"""
"0","  ) +"
"0","  # Statistikbox oben rechts"
"0","  ggplot2::annotate("
"0","    ""text"","
"0","    x = Inf, y = Inf,"
"0","    hjust = 1.05, vjust = 1.1, size = 3.2,"
"0","    label = paste0("
"0","      ""Median: "", round(median_min, 2), "" min\n"","
"0","      ""Cutoff: "", round(cutoff_speeder, 2), "" min\n"","
"0","      ""Q05: "", round(q_all[1], 2), "" | Q25: "", round(q_all[2], 2), ""\n"","
"0","      ""Q50: "", round(q_all[3], 2), "" | Q75: "", round(q_all[4], 2), ""\n"","
"0","      ""Q95: "", round(q_all[5], 2)"
"0","    )"
"0","  ) +"
"0","  # Fußnote: ""Eingezeichnet:"" fett + zweite Zeile normal, beide unter der x-Achse"
"0","  ggplot2::annotate("
"0","    ""text"","
"0","    x = -Inf, y = y_note_bold,"
"0","    hjust = -0.02, vjust = 0, size = 2.8,"
"0","    fontface = ""bold"","
"0","    label = ""Eingezeichnet:"""
"0","  ) +"
"0","  ggplot2::annotate("
"0","    ""text"","
"0","    x = -Inf, y = y_note_text,"
"0","    hjust = -0.02, vjust = 0, size = 2.8,"
"0","    label = note_line"
"0","  ) +"
"0","  ggplot2::theme_minimal(base_size = 12) +"
"0","  ggplot2::theme("
"0","    # genug Platz unten schaffen"
"0","    plot.margin = ggplot2::margin(t = 10, r = 10, b = 40, l = 10)"
"0","  ) +"
"0","  # y-Achse nach unten erweitern, damit Fußnote sichtbar ist"
"0","  ggplot2::coord_cartesian(ylim = c(1.25 * y_note_text, NA), clip = ""off"")"
"0",""
"0","ggplot2::ggsave("
"0","  filename = file.path(PLOTS_DIR, ""qc_bearbeitungszeit_alle_faelle.png""),"
"0","  plot = p_all,"
"0","  width = 8, height = 5, dpi = 300"
"0",")"
"0",""
"0","p_all"
"0",""
